# Mektep Platform

Платформа для автоматизации создания отчетов из mektep.edu.kz.

## Быстрый старт

### 1. Миграция базы данных (обязательно при первом запуске)

```bash
python add_ai_api_key_column.py
```

### 2. Запуск веб-сервера

```bash
python app.py
```

Сервер запустится на `http://localhost:5000`

### 3. Настройка AI (в браузере)

1. Откройте `http://localhost:5000`
2. Войдите как superadmin (создайте через `flask create-superadmin` если нужно)
3. В таблице "Школы" добавьте AI API ключ для каждой школы
4. Нажмите "OK"

### 4. Запуск десктопного приложения

```bash
cd mektep-desktop
pip install -r requirements.txt
playwright install chromium
python main.py
```

---

## Структура проекта

```
Проект/
├── Шаблон.xlsx              # Шаблоны (в корне)
├── Шаблон.docx
├── Шаблон_каз.docx
├── app.py                   # Веб-сервер
├── add_ai_api_key_column.py # Миграция БД
├── scrape_mektep.py         # A
└── mektep-desktop/          # Десктопное приложение
    ├── main.py
    └── app/
```

---

## Функции

### Веб-приложение
- Панель суперадмина для управления школами и пользователями
- Управление AI API ключами для каждой школы
- Кабинет учителя для запуска скрапера

### Десктопное приложение
- Авторизация через веб-платформу (обязательна)
- Скрапинг данных из mektep.edu.kz
- Генерация отчетов Excel/Word
- История отчетов с фильтрацией
- Редактор целей обучения с AI генерацией

---

## Особенности

### Мультиязычность
- Поддержка русского и казахского языков
- Десктоп: переключение в настройках или на экране входа
- Веб: переключатель РУ/ҚЗ в навбаре

### Выбор школы
- Если учитель работает в нескольких школах, появляются кнопки выбора
- Названия школ определяются автоматически с сайта
- Работает на русском и казахском интерфейсах mektep.edu.kz
- Таймаут 60 сек, после чего выбирается первая школа

### AI генерация
- API ключи управляются суперадмином для каждой школы
- Автоматическая генерация анализа целей обучения (перечень затруднений, причины, коррекционная работа)

---

## Требования

- Python 3.11+
- Windows 10/11
- Playwright (chromium)
- Подключение к интернету

## Установка зависимостей

```bash
pip install -r requirements.txt
playwright install chromium
```

---

## Troubleshooting

**Браузер не запускается:**
```bash
playwright install chromium
```

**Сервер недоступен:**
- Проверьте, что сервер запущен на localhost:5000
- Проверьте подключение к интернету

**AI не работает:**
- Проверьте, что суперадмин установил AI ключ для школы

**Шаблоны не найдены:**
- Убедитесь, что файлы Шаблон.xlsx, Шаблон.docx в корне проекта

**Квота исчерпана:**
- Обратитесь к администратору для увеличения лимита

---

## Лицензия

Проприетарное ПО - Mektep Platform
